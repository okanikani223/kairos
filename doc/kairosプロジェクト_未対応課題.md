# kairosプロジェクト 未対応課題リスト

このドキュメントは、設計書間の矛盾や未解決の課題を整理したものです。

## 1. 用語・概念の不一致に関する課題

### 1.1. 場所を表す用語の不一致
- **課題**: 「勤怠情報提出先(Company)」と「勤務地」という用語の統一
- **対応案**: 
  - 用語集の作成 ✅ 完了（kairosプロジェクト_用語集.md）
  - 各設計書での用語統一
- **優先度**: 中
- **担当者**: カーン
- **対応状況**: 部分対応（用語集作成完了、各設計書の修正は未実施）

### 1.2. 勤怠情報作成の主体の矛盾
- **課題**: 「自動勤怠情報作成」機能の独立性と実装方法
- **対応案**: 
  - 機能の明確な分離 ✅ 完了
  - 自動勤怠情報作成機能の詳細設計書作成 ✅ 完了（勤怠情報登録機能_機能設計.md）
- **優先度**: 高
- **担当者**: カーン
- **対応状況**: 完了（勤怠情報登録機能として統合設計完了）

### 1.3. generateOptionsパラメータの動作明確化
- **課題**: `autoGenerate: true`で`generateOptions`が省略された場合の動作が不明確
- **対応案**: 
  - デフォルト値の明確化 ✅ 完了
  - 省略時の動作説明追加 ✅ 完了
  - エラーハンドリングの詳細化 ✅ 完了
- **優先度**: 中
- **担当者**: カーン
- **対応状況**: 完了（勤怠情報登録機能_機能設計.mdでデフォルト値動作とエラーハンドリング明確化）

### 1.4. 既存設計書への用語集適用
- **課題**: 既存の設計書で用語集と異なる用語が混在している
- **対応案**: 
  - 各機能設計書の用語を用語集に合わせて修正
  - 統一された用語での再レビュー実施
- **優先度**: 中
- **担当者**: 未割当

## 2. 自動勤怠情報作成のロジック課題

### 2.1. 判定ロジックの不一致
- **課題**: 位置情報登録機能の「距離計算アルゴリズム」と勤怠情報取得機能の「勤務判定アルゴリズム」の関係が不明確
- **対応案**: 
  - アルゴリズム関係の明確化 ✅ 部分完了（勤怠情報登録機能で統合定義）
  - 共通ライブラリの定義
- **優先度**: 中
- **担当者**: カーン
- **対応状況**: 部分対応（アルゴリズム統合済み、共通ライブラリ化は未実施）

### 2.2. 休暇判定の記述と実装の不一致
- **課題**: 休暇判定ロジックがどこで実装されるか不明確
- **対応案**: 
  - 処理フローの詳細化 ✅ 部分完了（勤怠情報登録機能で定義）
  - コンポーネント分割と責務の明確化
- **優先度**: 中
- **担当者**: カーン
- **対応状況**: 部分対応（処理フロー定義済み、コンポーネント分割は未実施）

## 3. 新しい機能への対応課題

### 3.1. ユーザーの勤怠設定の参照不足
- **課題**: 新たに追加された「ユーザーの勤怠設定(UserAttendanceSetting)」モデルの参照方法が不明確
- **対応案**: 
  - 具体的な参照関係の明記 ✅ 部分完了（勤怠情報登録機能で使用方法定義）
  - 機能間の連携フローの図示
- **優先度**: 高
- **担当者**: カーン
- **対応状況**: 部分対応（参照方法定義済み、連携フロー図示は未実施）

## 4. セキュリティ要件の整合性課題

### 4.1. アクセス権限の粒度
- **課題**: 「権限を付与された者」の定義や権限管理の方法が不明確
- **対応案**: 
  - アクセス権限マトリクスの作成
  - 権限付与の仕組みの明確化
- **優先度**: 中
- **担当者**: 未割当

## 5. 自動勤怠情報作成機能の独立設計

### 5.1. 新規機能設計書の作成
- **課題**: 「自動勤怠情報作成機能」の詳細設計がない
- **対応案**: 
  - 「自動勤怠情報作成機能_機能設計.md」の新規作成 ✅ 完了（勤怠情報登録機能として統合）
  - APIエンドポイントの設計 ✅ 完了
  - 処理フローの詳細化 ✅ 完了
- **優先度**: 高
- **担当者**: カーン
- **対応状況**: 完了（勤怠情報登録機能に統合済み）

## 6. その他の課題

### 6.1. 共通コンポーネントの整理
- **課題**: 複数の機能で使用される共通ロジック（勤怠判定、休暇判定など）の管理方法が不明確
- **対応案**: 
  - 共通ライブラリ設計書の作成
  - 責務の分割と依存関係の明確化 ✅ 部分完了（勤怠情報登録機能で依存関係定義）
- **優先度**: 低
- **担当者**: カーン
- **対応状況**: 部分対応（依存関係明確化済み、共通ライブラリ設計書は未作成）

---

## 対応状況

| 課題ID | 課題名 | 優先度 | 対応状況 | 対応予定日 | 担当者 |
|------|------|------|--------|---------|------|
| 1.1 | 場所を表す用語の不一致 | 中 | 部分対応 | 未定 | カーン |
| 1.2 | 勤怠情報作成の主体の矛盾 | 高 | 完了 | 2025/06/08 | カーン |
| 1.3 | generateOptionsパラメータの動作明確化 | 中 | 完了 | 2025/06/08 | カーン |
| 1.4 | 既存設計書への用語集適用 | 中 | 未対応 | 未定 | - |
| 2.1 | 判定ロジックの不一致 | 中 | 部分対応 | 未定 | カーン |
| 2.2 | 休暇判定の記述と実装の不一致 | 中 | 部分対応 | 未定 | カーン |
| 3.1 | ユーザーの勤怠設定の参照不足 | 高 | 部分対応 | 未定 | カーン |
| 4.1 | アクセス権限の粒度 | 中 | 未対応 | 未定 | - |
| 5.1 | 新規機能設計書の作成 | 高 | 完了 | 2025/06/08 | カーン |
| 6.1 | 共通コンポーネントの整理 | 低 | 部分対応 | 未定 | カーン |
| 7.1 | companyIdパラメータの削除 | 高 | 完了 | 2025/06/08 | カーン |
| 8.1 | 勤怠情報の更新・削除機能設計書の作成 | 高 | 完了 | 2025/01/27 | カーン |

## 新規追加された課題

### 7.1. companyIdパラメータの削除
- **課題**: 勤怠情報提出先（Company）機能が保留のため、自動生成時のcompanyIdパラメータを削除する必要がある
- **対応案**: 
  - API仕様からcompanyIdパラメータ削除 ✅ 完了
  - アルゴリズム関数をuserSettings参照に変更 ✅ 完了
  - 依存関係の更新 ✅ 完了
- **優先度**: 高
- **担当者**: カーン
- **対応状況**: 完了（勤怠情報登録機能からcompanyId関連削除完了）

### 8.1. 勤怠情報の更新・削除機能設計書の作成
- **課題**: 勤怠情報の更新機能と削除機能の機能設計書が未作成
- **対応案**: 
  - 勤怠情報更新機能の機能設計書作成 ✅ 完了
  - 勤怠情報削除機能の機能設計書作成 ✅ 完了
  - 要件整理ドキュメントの状態更新 ✅ 完了
- **優先度**: 高
- **担当者**: カーン
- **対応状況**: 完了（更新・削除機能の設計書作成完了）

---

※このドキュメントは開発の進行に合わせて随時更新されます。
