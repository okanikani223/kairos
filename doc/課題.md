# 現在感じている問題点と理想の姿
## 問題点
- 毎月提出している勤怠表の作成がめんどくさい
  - 毎日の勤怠情報(勤務開始、終了の時刻、勤務時間、有給消化など)の記録がめんどくさい
    - 毎日記録がめんどくさいのでやってない。提出期限の2、3日前にまとめて記録している状況
      - まとめて記録すると、思い出したりするのがめんどくさい
      - 勤怠開始、終了は作業現場のTeamsに報告しているのでそこから拾い上げているが手作業なのでめんどくさい。
  - 提出する先が複数ある。
    - 提出する先毎に、集計期間と様式が違う
      - 具体的には以下
        - 所属企業
          - 毎月15日締め
          - 日毎の記録とサマリが必要
        - 作業現場
          - 月末締め
          - Redmineへの登録と、Excelフォーマットの週毎集計された記録書類が必要
          - Redmineは日毎かつ、作業ごとの時間記録が必要。作業はチケット番号で一意になる
          - 記録書類は週毎の集計、かつ作業ごとの時間記録。作業はチケット番号で一意になる
        - 現場と所属企業の間に入っている会社
          - 月末締め
          - Webで入力するツールを使っている(会社提供)
## 理想
- 基本は手入力なし
  - 事前の設定や、内容確認した結果の修正などは必要
    - 事前に設定するものは以下の予定
      - 勤怠情報提出先情報
        - 情報の構造は以下に例示
        ```json
        {
          "会社名(companyName)": "株式会社XXXXXX",
          "位置情報(location)": {
            "緯度(latitude)": "76.46573",
            "経度(longitude)": "165.88765",
          },
          "規定勤怠開始時刻(regulationStartTime)":"09:00",
          "規定勤怠終了時刻(regulationEndTime)":"17:30",
          "規定休憩開始時刻(regulationStartTime)":"12：00",
          "規定休憩終了時刻(regulationEndTime)":"13：00",
          "所属開始日":"2025-05-01",
          "所属終了日":"2025-07-31",
        }
        ```
        - 提出先分登録出来る。
- 定期的に位置情報を登録して、勤怠情報作成用の種情報とする
  - 定期的な位置情報登録は、スマホやPCなどから実施できるようにしたい
    - 位置情報の構造は以下に例示する
      ```json
      {
        "緯度(latitude)": "76.46573",
        "経度(longitude)": "165.88765",
        "登録日時(at)": "2025-05-02T09:00:00+09:00"
      }
      ```
  - 登録した位置情報と、事前設定済みの勤怠情報提出先情報から、勤怠情報を作成出来る
    - 勤怠情報の構造は以下に例示する
    ```json
    {
      "提出年月(yearMonth)": "2025-05",
      "勤怠詳細": [{"日毎の勤怠情報"}],
      "サマリ": {
        "就業日数(totalWorkDays)": "20.00",
        "有給日数(totalPaidLeaveDays)": "00.00",
        "代休日数(totalCompensatoryDays)": "00.00",
        "特休日数(totalSpecialLeaveDays)": "00.00",
        "就業時間(totalWorkHours)": "150.00",
        "残業時間(totalOverHours)": "00.00",
        "休出時間(totalHolidayWorkHours)": "00.00",
      },
    }
    ```
    - 日毎の勤怠情報は以下に例示する
    ```json
    {
      "日付(date)": "2025-05-01",
      "休日(holiday)": true,
      "休暇(leave)": "",
      "勤怠開始時刻(startDateTime)": "2025-05-01T09:00:00+09:00",
      "勤怠終了時刻(endDateTime)": "2025-05-01T17:30:00+09:00",
      "休憩時間(restHour)": "1.00",
      "勤務時間(workHour)": "7.50",
      "残業時間(overHour)": "0.00",
      "備考":""
    }
    ```
  - 勤怠情報作成については、未作成の場合に位置情報から勤怠情報の自動作成を行なう
    - 既に作成済みの場合には自動作成は行わない
  - 勤怠情報にたいして、登録・取得・更新・削除が出来るようにしたい
  - 勤怠情報は提出先ごとにフォーマットが登録出来るようにしたい