# ドキュメント構造統一標準

## 概要
kairosプロジェクトにおける設計書・機能仕様書の構造と章立てを統一するための標準です。
本標準により、ドキュメント間の一貫性を保ち、可読性・保守性を向上させます。

## ドキュメント分類

### Level A: 概要設計書（Overview Design Documents）
システム全体や大分類に関する設計書

**対象文書例**: 
- API設計統一ガイドライン.md
- アクセス権限管理設計書.md
- 共通ライブラリ設計書.md

**標準構造**:
```
1. 概要
2. スコープ・適用範囲
3. 基本方針・原則
4. 全体構成・アーキテクチャ
5. 詳細仕様
6. 実装ガイドライン
7. 運用・保守指針
8. 付録・参考資料
```

### Level B: 機能設計書（Function Design Documents）
個別機能の詳細設計書

**対象文書例**: 
- 勤怠情報取得機能設計書.md
- 位置情報登録機能設計書.md
- 勤怠情報提出先取得機能設計書.md

**標準構造**:
```
1. 機能概要
2. 要件・制約事項
3. 業務フロー・ユースケース
4. API仕様
5. データ仕様
6. 業務ロジック
7. セキュリティ・権限制御
8. エラーハンドリング・例外処理
9. 非機能要件
10. テスト仕様
11. 実装ノート・技術的詳細
```

### Level C: 標準・ガイドライン文書（Standards & Guidelines）
開発標準やガイドライン

**対象文書例**: 
- 勤務判定アルゴリズム統一標準.md
- セキュリティ要件記載標準.md
- ドキュメント構造統一標準.md（本文書）

**標準構造**:
```
1. 概要
2. 適用範囲
3. 基本原則・方針
4. 標準仕様・ルール
5. 実装例・サンプル
6. チェックリスト
7. 例外処理・特例
8. 更新履歴・バージョン管理
```

## 章立て詳細規則

### 1. 共通必須セクション
すべてのドキュメントに含むべきセクション：

#### 1.1 ヘッダー情報
```markdown
# [ドキュメント名]

**作成日**: YYYY/MM/DD
**最終更新**: YYYY/MM/DD
**バージョン**: X.Y.Z
**担当者**: [担当者名]
**レビュー状況**: [Draft/Review/Approved]
```

#### 1.2 概要セクション
- 目的・背景
- スコープ・適用範囲
- 前提条件・制約事項

#### 1.3 参照・関連文書
```markdown
## 関連文書
- [文書名](ファイルパス) - 関係性の説明
- [API設計統一ガイドライン](API設計統一ガイドライン.md) - API設計の基本方針
```

### 2. レベル別詳細構造

#### Level A: 概要設計書
```markdown
# [文書名]

## 1. 概要
### 1.1 目的・背景
### 1.2 スコープ・適用範囲
### 1.3 前提条件・制約事項

## 2. 基本方針・原則
### 2.1 設計原則
### 2.2 技術方針
### 2.3 品質方針

## 3. 全体構成・アーキテクチャ
### 3.1 システム構成
### 3.2 コンポーネント構成
### 3.3 データフロー

## 4. 詳細仕様
### 4.1 [主要機能1]
### 4.2 [主要機能2]
### 4.3 [主要機能3]

## 5. 実装ガイドライン
### 5.1 開発標準
### 5.2 コーディング規約
### 5.3 テスト方針

## 6. 運用・保守指針
### 6.1 運用手順
### 6.2 監視・ログ
### 6.3 障害対応

## 7. 付録・参考資料
### 7.1 用語集
### 7.2 参考文献
### 7.3 変更履歴
```

#### Level B: 機能設計書
```markdown
# [機能名]設計書

## 1. 機能概要
### 1.1 機能の目的・背景
### 1.2 機能スコープ
### 1.3 前提条件・制約事項

## 2. 要件・制約事項
### 2.1 機能要件
### 2.2 非機能要件
### 2.3 技術的制約
### 2.4 業務制約

## 3. 業務フロー・ユースケース
### 3.1 基本フロー
### 3.2 代替フロー
### 3.3 例外フロー
### 3.4 ユースケース図

## 4. API仕様
### 4.1 エンドポイント定義
### 4.2 リクエスト仕様
### 4.3 レスポンス仕様
### 4.4 HTTPステータスコード

## 5. データ仕様
### 5.1 データモデル
### 5.2 バリデーション仕様
### 5.3 データ変換仕様

## 6. 業務ロジック
### 6.1 主要アルゴリズム
### 6.2 計算式・判定ロジック
### 6.3 業務ルール

## 7. セキュリティ・権限制御
### 7.1 認証・認可要件
### 7.2 データアクセス制御
### 7.3 セキュリティ考慮事項

## 8. エラーハンドリング・例外処理
### 8.1 エラー分類
### 8.2 エラーレスポンス
### 8.3 ログ出力仕様

## 9. 非機能要件
### 9.1 性能要件
### 9.2 可用性要件
### 9.3 保守性要件

## 10. テスト仕様
### 10.1 テスト方針
### 10.2 テストケース
### 10.3 テストデータ

## 11. 実装ノート・技術的詳細
### 11.1 実装上の注意点
### 11.2 技術的詳細
### 11.3 パフォーマンス考慮事項
```

## セクション記載ガイドライン

### 1. 必須記載事項
以下の項目は該当する場合必ず記載する：

#### API仕様セクション
- エンドポイントURL
- HTTPメソッド
- リクエスト/レスポンス形式
- HTTPステータスコード
- エラーレスポンス

#### セキュリティセクション
- 認証・認可要件（レベルA/B/Cに応じた詳細度）
- データアクセス制御
- セキュリティログ要件

#### エラーハンドリングセクション
- エラー分類と対応
- エラーレスポンス形式
- ログ出力レベル

### 2. 条件的記載事項
該当する場合のみ記載する：

#### 業務ロジックセクション
- 複雑な計算式・アルゴリズムがある場合
- 業務ルールが複数ある場合
- 判定ロジックが含まれる場合

#### 非機能要件セクション
- 特別な性能要件がある場合
- 可用性・信頼性要件がある場合
- スケーラビリティ要件がある場合

### 3. 省略可能事項
以下は必要に応じて省略可能：

#### 技術的詳細セクション
- 標準的な実装の場合
- 他文書で詳細化されている場合
- 自明な内容の場合

## 相互参照・リンク規則

### 1. 文書間参照
```markdown
詳細は[API設計統一ガイドライン](API設計統一ガイドライン.md#section)を参照。
```

### 2. セクション内参照
```markdown
前述の[4.1 エンドポイント定義](#41-エンドポイント定義)で定義した...
```

### 3. 外部参照
```markdown
実装については[共通ライブラリ設計書](共通ライブラリ設計書.md)の以下を使用：
- 距離計算アルゴリズム
- バリデーションユーティリティ
```

## バージョン管理・更新規則

### 1. バージョン番号
- **Major.Minor.Patch** 形式（例：1.2.3）
- **Major**: 大幅な構造変更・破壊的変更
- **Minor**: 機能追加・セクション追加
- **Patch**: 誤字修正・軽微な修正

### 2. 変更履歴
```markdown
## 変更履歴
| Version | Date | Author | Description |
|---------|------|--------|-------------|
| 1.0.0 | 2025/06/09 | [担当者] | 初版作成 |
| 1.1.0 | 2025/06/10 | [担当者] | セキュリティ要件追加 |
```

### 3. レビュー・承認
- **Draft**: 作成中・レビュー前
- **Review**: レビュー中
- **Approved**: 承認済み・正式版

## チェックリスト

### 新規作成時
- [ ] 適切なレベル（A/B/C）の構造を使用しているか
- [ ] 必須セクションがすべて含まれているか
- [ ] ヘッダー情報が正しく記載されているか
- [ ] 関連文書への参照が適切に設定されているか

### 更新時
- [ ] バージョン番号が適切に更新されているか
- [ ] 変更履歴が記録されているか
- [ ] 関連文書との整合性は保たれているか
- [ ] 参照リンクが有効であるか

### レビュー時
- [ ] 構造が標準に準拠しているか
- [ ] 記載内容に漏れ・重複はないか
- [ ] 他文書との矛盾はないか
- [ ] 可読性・理解しやすさは十分か

---

**作成日**: 2025/06/09
**最終更新**: 2025/06/09
**バージョン**: 1.0.0
**担当者**: システム設計チーム
**レビュー状況**: Draft
